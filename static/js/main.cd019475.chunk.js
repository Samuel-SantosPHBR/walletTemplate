(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{28:function(e,t,a){e.exports=a(41)},33:function(e,t,a){},38:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),c=a.n(l),i=a(19),o=(a(33),a(10)),s=a(2),u=a(8),d=a(9),m=a(13),p=a(12),h=a(11);a(38);var E=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={emailErro:!0,passwordErro:!0},n.emailRef=r.a.createRef(),n.handleClickSubmitLogin=n.handleClickSubmitLogin.bind(Object(m.a)(n)),n.handleValidateEmailKeyUp=n.handleValidateEmailKeyUp.bind(Object(m.a)(n)),n.handleValidatePasswordKeyUp=n.handleValidatePasswordKeyUp.bind(Object(m.a)(n)),n}return Object(d.a)(a,[{key:"checkFormatEmail",value:function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)}},{key:"checkForSubmit",value:function(){var e=this.state,t=e.emailErro,a=e.passwordErro;return!t&&!a}},{key:"handleClickSubmitLogin",value:function(e){var t=this.props.dispatch;e.preventDefault(),this.checkForSubmit()&&t(function(e){return{type:"Login",payload:e}}({email:this.emailRef.current.value}))}},{key:"handleValidateEmailKeyUp",value:function(e){return this.setState({emailErro:!this.checkFormatEmail(e.target.value||"")}),e}},{key:"handleValidatePasswordKeyUp",value:function(e){return this.setState({passwordErro:e.target.value.length<6}),e}},{key:"render",value:function(){var e=this,t=this.state,a=t.emailErro,n=t.passwordErro;return this.props.email?r.a.createElement(s.a,{to:{pathname:"/carteira"}}):r.a.createElement("div",{className:["container","divLogin"].join(" ")},r.a.createElement("h1",null,r.a.createElement("img",{src:"./trybeLogo.png",alt:"Logo",className:"imgLogin"}),"Wallet"),r.a.createElement("form",{onSubmit:function(t){return e.handleClickSubmitLogin(t)}},r.a.createElement("div",null,r.a.createElement("input",{className:"form-control",type:"email",placeholder:"E-mail",ref:this.emailRef,onKeyUp:function(t){return e.handleValidateEmailKeyUp(t)},id:"email","data-testid":"email-input"})),r.a.createElement("div",null,r.a.createElement("input",{className:"form-control mt-2",type:"password",placeholder:"Senha",onKeyUp:function(t){return e.handleValidatePasswordKeyUp(t)},id:"password","data-testid":"password-input"})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"btn btn-success form-control btn-elevado",disabled:a||n},"Entrar"))))}}]),a}(r.a.Component);E.defaultProps={email:""};var f=Object(o.b)((function(e){return{email:e.user.email}}))(E),v=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.email,a=e.valorTotal;return r.a.createElement("header",{className:"navbar navbar-light bg-light"},r.a.createElement("img",{src:"./trybeLogo.png",alt:"Logo",className:"me-4 imgLogo"}),r.a.createElement("div",{className:"d-flex"},r.a.createElement("span",{className:"me-2"},r.a.createElement("b",null,"Email: "),r.a.createElement("span",{className:"me-1","data-testid":"email-field"},t||"exemplo@email.com")),r.a.createElement("span",{className:"me-4"},r.a.createElement("b",null,"Despesa Total: "),"R$",r.a.createElement("span",{className:"me-1","data-testid":"total-field"},a||"0.00"),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL"))))}}]),a}(r.a.Component);v.defaultProps={email:"exemplo@email.com",valorTotal:0};var b=Object(o.b)((function(e){return{email:e.user.email,valorTotal:e.wallet.currentTotal}}))(v),g=a(3);function y(e){return{type:"saveExpense",payload:e}}var x=["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"],j=["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"],O=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).idRef=r.a.createRef(),n.valorRef=r.a.createRef(),n.descricaoRef=r.a.createRef(),n.moedaRef=r.a.createRef(),n.pagamentoRef=r.a.createRef(),n.tagRef=r.a.createRef(),n.getMoedasFromApI(),n.state=n.getDefaultStateLocal(),n.saveExpenseHandler=n.saveExpenseHandler.bind(Object(m.a)(n)),n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(){}},{key:"getSnapshotBeforeUpdate",value:function(){return this.populeInputsEdit(),this.state}},{key:"getDefaultStateLocal",value:function(){return{expenseId:"",expenseValue:"0.00",expenseDescription:"",expenseCurrency:"USD",expenseMethod:"Dinheiro",expenseTag:"Alimenta\xe7\xe3o"}}},{key:"getMoedasFromApI",value:function(){(0,this.props.dispatch)((function(e){fetch("https://economia.awesomeapi.com.br/json/all").then((function(t){t.json().then((function(t){var a=Object.keys(t);e({type:"addMoedas",payload:{moedas:a.filter((function(e){return"USDT"!==e&&"DOGE"!==e}))}})}))}))}))}},{key:"saveExpenseHandler",value:function(e){e.preventDefault();var t,a=this.props.dispatch,n=this.props.currentExpenseEdit,r={id:this.idRef.current.value,value:this.valorRef.current.value,description:this.descricaoRef.current.value,currency:this.moedaRef.current.value,method:this.pagamentoRef.current.value,tag:this.tagRef.current.value,exchangeRates:n?n.exchangeRates:null};return a((t={expense:r},function(e){null!==t.expense.exchangeRates&&e(y(t)),fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json()})).then((function(a){t.expense.exchangeRates=a,e(y(t))}))})),this.setState(Object(g.a)({},this.getDefaultStateLocal())),!0}},{key:"populeInputsEdit",value:function(){var e=this.props,t=e.isEdit,a=e.currentExpenseEdit;t&&this.idRef.current.value.length<1&&a&&this.setState({expenseId:a.id,expenseValue:a.value||"0.00",expenseDescription:a.description,expenseCurrency:a.currency,expenseMethod:a.method,expenseTag:a.tag})}},{key:"render",value:function(){var e=this,t=this.state,a=t.expenseId,n=t.expenseValue,l=t.expenseDescription,c=t.expenseCurrency,i=t.expenseMethod,o=t.expenseTag,s=this.props,u=s.isEdit,d=s.moedas;return r.a.createElement("form",{className:"row",onSubmit:function(t){return e.saveExpenseHandler(t)}},r.a.createElement("input",{type:"hidden",name:"id","data-testid":"id-input",ref:this.idRef,value:a,onChange:function(t){return e.setState({expenseId:t.target.value})}}),r.a.createElement("label",{htmlFor:"valor",className:"col"},"Valor:",r.a.createElement("input",{className:"form-control",name:"valor",id:"valor",min:"0.00",step:"0.01","data-testid":"value-input",value:n||"",onChange:function(t){return e.setState({expenseValue:t.target.value})},type:"number",ref:this.valorRef})),r.a.createElement("label",{htmlFor:"descricao",className:"col"},"Descri\xe7\xe3o:",r.a.createElement("input",{name:"descricao",className:"form-control",id:"descricao",min:"0.00",step:"0.01",type:"text","data-testid":"description-input",value:l,onChange:function(t){return e.setState({expenseDescription:t.target.value})},ref:this.descricaoRef})),r.a.createElement("label",{htmlFor:"moeda",className:"col"},"Moeda:",r.a.createElement("select",{name:"moeda",id:"moeda",className:"form-control","data-testid":"currency-input",value:c,onChange:function(t){return e.setState({expenseCurrency:t.target.value})},ref:this.moedaRef},d.map((function(e){return r.a.createElement("option",{key:e},e)})))),r.a.createElement("label",{htmlFor:"pagamento",className:"col"},"M\xe9todo de pagamento:",r.a.createElement("select",{name:"pagamento",id:"pagamento",className:"form-control","data-testid":"method-input",ref:this.pagamentoRef,value:i,onChange:function(t){return e.setState({expenseMethod:t.target.value})}},x.map((function(e){return r.a.createElement("option",{key:e},e)})))),r.a.createElement("label",{htmlFor:"tag-despesa",className:"col"},"Tag:",r.a.createElement("select",{className:"form-control",name:"tag-despesa",id:"tag-despesa","data-testid":"tag-input",ref:this.tagRef,value:o,onChange:function(t){return e.setState({expenseTag:t.target.value})}},j.map((function(e){return r.a.createElement("option",{key:e},e)})))),r.a.createElement("button",{type:"submit",className:u?"btn btn-dark col addEdit":"btn btn-primary col addEdit"},u?"Editar despesa":"Adicionar despesa"))}}]),a}(r.a.Component);O.defaultProps={currentExpenseEdit:{},moedas:[],isEdit:!1};var k=Object(o.b)((function(e){return{moedas:e.wallet.currencies,isEdit:e.wallet.isEdit,currentExpenseEdit:e.wallet.currentExpenseEdit}}))(O),w=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"getNameCurrency",value:function(e){return e?e.exchangeRates[e.currency].name.split("/")[0]:""}},{key:"getValueConvert",value:function(e){return e?(parseFloat(e.value)*parseFloat(e.exchangeRates[e.currency].ask)).toFixed(2):""}},{key:"getCambio",value:function(e){return e?parseFloat(e.exchangeRates[e.currency].ask).toFixed(2):""}},{key:"deleteExpensehandle",value:function(e){(0,this.props.dispatch)(function(e){return{type:"deleteExpense",payload:e}}({expense:e}))}},{key:"editExpensehandle",value:function(e){(0,this.props.dispatch)(function(e){return{type:"selectEditExpense",payload:e}}({expense:e}))}},{key:"render",value:function(){var e=this,t=this.props.wallet;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:t.isEdit?"bg-success text-dark":"bg-dark text-light"},r.a.createElement(k,null)),r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"table-dark"},r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),r.a.createElement("tbody",null,t.expenses.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.tag),r.a.createElement("td",null,t.method),r.a.createElement("td",null,t.value),r.a.createElement("td",null,e.getNameCurrency(t)),r.a.createElement("td",null,e.getCambio(t)),r.a.createElement("td",null,e.getValueConvert(t)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"edit-btn",className:"btn btn-warning me-1 btn-elevado",onClick:function(){return e.editExpensehandle(t)}},"Editar"),r.a.createElement("button",{type:"button","data-testid":"delete-btn",className:"btn btn-danger btn-elevado",onClick:function(){return e.deleteExpensehandle(t)}},"Excluir")))})))))}}]),a}(r.a.Component);w.defaultProps={wallet:{}};var R=Object(o.b)((function(e){return{wallet:e.wallet}}))(w),N=(a(40),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,null),r.a.createElement(R,null))}}]),a}(r.a.Component));var C=function(){return r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0},r.a.createElement(f,null)),r.a.createElement(s.b,{path:"/carteira",exact:!0},r.a.createElement(N,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var S=a(14),F=a(27),L={email:""},D={currencies:[],expenses:[],currentId:0,currentTotal:0,isEdit:!1,currentExpenseEdit:null};function T(e){var t=0;return e.length<=0?t:(e.forEach((function(e){t+=parseFloat(e.value)*parseFloat(e.exchangeRates[e.currency].ask)})),parseFloat(t).toFixed(2))}function V(e,t){var a=t.expense,n=e.expenses;if(null==a.id||""===a.id)return a.id=e.currentId,n.push(a),Object(g.a)(Object(g.a)({},e),{},{expenses:n,isEdit:!1,currentId:e.currentId+1,currentTotal:T(n),currentExpenseEdit:null});a.id=parseInt(a.id,10);var r=n.map((function(e){return e.id===a.id?a:e}));return Object(g.a)(Object(g.a)({},e),{},{expenses:r,currentTotal:T(r),isEdit:!1,currentExpenseEdit:null})}function I(e,t){var a=t.expense,n=e.expenses.filter((function(e){return e.id!==a.id}));return Object(g.a)(Object(g.a)({},e),{},{expenses:n,currentTotal:T(n)})}var U=Object(S.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Login":return Object(g.a)(Object(g.a)({},e),{},{email:t.payload.email});case"Logout":return Object(g.a)(Object(g.a)({},e),{},{email:""});default:return e}},wallet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"addMoedas":return Object(g.a)(Object(g.a)({},e),{},{currencies:t.payload.moedas});case"saveExpense":return V(e,t.payload);case"deleteExpense":return I(e,t.payload);case"selectEditExpense":return Object(g.a)(Object(g.a)({},e),{},{currentExpenseEdit:t.payload.expense,isEdit:!0});default:return e}}}),M=Object(S.d)(U,Object(S.a)(F.a));c.a.render(r.a.createElement(i.a,null,r.a.createElement(o.a,{store:M},r.a.createElement(C,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.cd019475.chunk.js.map